stages:
  - test
  - deploy

test:
  stage: test
  image: golang:latest

  before_script:
    - go mod download

  script:
    - go run main.go "#FFFFFF" "#FFFFFF" "#FFFFFF" "#FFFFFF" "#FFFFFF" "#FFFFFF" 0 0 0 0 0

  artifacts:
    paths:
      - goout.png

deploy:
  stage: deploy
  image: curlimages/curl:latest

  script:
    - 'curl -X POST -F "image=@goout.png" -H "Content-Type: application/json" -d "{\"key\": \"$TOKEN\"}" https://renderer-mirrorer.vercel.app/post'